webpackJsonp([1],{"+PJj":function(t,e){},0:function(t,e,a){t.exports=a("NHnr")},"1mFR":function(t,e){},"7GyA":function(t,e){},"7Otq":function(t,e,a){t.exports=a.p+"img/logo.7b216fcd.png"},"7zck":function(t,e){},BKLE:function(t,e,a){t.exports=a.p+"img/pause.c451d50b.svg"},BMiZ:function(t,e){},Bc8N:function(t,e,a){t.exports=a.p+"img/play.fac826ee.svg"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/5sW"),o=new n["a"],s=o,i={data:function(){return{status:"off"}},methods:{setStatus:function(t){this.status=t,s.$emit("ws-action",t)}},mounted:function(){var t=this;s.$on("ws-status",function(e){console.log("new status :",e),t.status=e})}},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[t._m(0),t._v(" "),n("div",{staticClass:"commandes"},["off"==t.status?n("img",{attrs:{src:a("Bc8N"),alt:"play",title:"Start the streaming"},on:{click:function(e){t.setStatus("on")}}}):t._e(),t._v(" "),"on"==t.status?n("img",{attrs:{src:a("BKLE"),alt:"kafka icon",title:"Pause the streaming"},on:{click:function(e){t.setStatus("off")}}}):t._e()])])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("img",{staticClass:"icon",attrs:{src:a("7Otq"),alt:"kafka icon"}}),t._v(" Kafka Web Consumer")])}],l=a("XyMi");function u(t){a("Tc2v")}var d=!1,m=u,f="data-v-0c01bdba",p=null,g=Object(l["a"])(i,r,c,d,m,f,p),h=g.exports,v=(a("gbyG"),a("Gh7F"),a("NYxO")),b=1e3;n["a"].use(v["a"]);var w={columns:[],logs:[]},y={bufferSize:function(t,e){console.log("Setting buffer size to ".concat(e)),b=e},addLog:function(t,e){for(var a in t.logs.length>=b&&t.logs.splice(0,1),t.logs.push(e),e)t.columns.includes(a)||t.columns.push(a)}},_={},x={logs:function(t){return t.logs},columns:function(t){return t.columns}},$=new v["a"].Store({state:w,getters:x,actions:_,mutations:y}),k={name:"app",components:{Header:h},data:function(){return{socket:null}},methods:{startStream:function(){var t="ws://".concat(window.location.host,"/consume?topicName=").concat(this.topicName);console.log("Connecting to ".concat(t," ...")),this.socket=new WebSocket(t),this.socket.onerror=function(t){console.error(t),s.$emit("ws-status","off")},this.socket.onopen=function(){var t;console.log("Connected"),s.$emit("ws-status","on"),this.onclose=function(){console.log("Connection ended")},this.onmessage=function(e){t=JSON.parse(e.data),$.commit("addLog",t),s.$emit("ws-data",t)}}},stopStream:function(){console.log("Closing websocket"),this.socket&&this.socket.close(),s.$emit("ws-status","off")}},created:function(){var t=this;this.bufferSize=this.$route.query.bufferSize,$.commit("bufferSize",this.bufferSize||1e3),this.topicName=this.$route.query.topicName,this.isAvro=this.$route.query.isAvro,s.$on("ws-action",function(e){if(console.log("New action ".concat(e)),"on"===e){var a=t.$route.query.topicName,n=t.$route.query.isAvro;t.startStream(a,n)}else"off"===e&&t.stopStream()})}},C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app","data-app":"",light:""}},[a("Header"),t._v(" "),a("router-view")],1)},S=[];function z(t){a("1mFR")}var N=!1,O=z,j=null,L=null,T=Object(l["a"])(k,C,S,N,O,j,L),E=T.exports,B=a("/ocq"),D={computed:{logs:function(){return this.$store.getters.logs}},created:function(){s.$emit("ws-action","on")},watch:{logs:function(){this.$el.scrollTo(0,this.$el.scrollHeight)}}},q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[t.logs&&0!==t.logs.length?t._e():a("p",{staticClass:"waiting"},[t._v("Waiting for new data...")]),t._v(" "),t._l(t.logs,function(e,n){return a("p",{key:n,staticClass:"row"},[t._v(t._s(e))])})],2)},F=[];function K(t){a("7GyA")}var P=!1,G=K,H="data-v-e3c4ff3e",M=null,Z=Object(l["a"])(D,q,F,P,G,H,M),A=Z.exports,J={computed:{columns:function(){return this.$store.getters.columns.map(function(t){return{text:t,value:t}})},logs:function(){return this.$store.getters.logs}},created:function(){s.$emit("ws-action","on")},watch:{logs:function(){var t=this.$el;t&&t.scrollTo(0,t.scrollHeight+100)}}},W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"table elevation-1",attrs:{headers:t.columns,items:t.logs,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return t._l(e.item,function(e){return a("td",{key:e.item,staticClass:"text-xs-left"},[t._v(t._s(e))])})}}])})},R=[];function V(t){a("kDZB")}var I=!1,Q=V,X="data-v-17448f94",Y=null,U=Object(l["a"])(J,W,R,I,Q,X,Y),tt=U.exports,et=a("1e2d"),at=a.n(et),nt={data:function(){return{zoom:2,center:[0,0],latitude:null,longitude:null}},watch:{logs:function(){this.longitude&&this.latitude&&this.map.getSource("logs").setData(this.data)}},computed:{latitudeTitle:function(){return this.$store.getters.columns.length>0?"Latitude":"Latitude (loading ...)"},longitudeTitle:function(){return this.$store.getters.columns.length>0?"Longitude":"Longitude (loading ...)"},isDisabled:function(){return 0===this.columns.length},columns:function(){return this.$store.getters.columns},logs:function(){return this.$store.getters.logs},data:function(){var t=this;return this.longitude&&this.latitude?{type:"FeatureCollection",features:this.logs.map(function(e){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[Number(e[t.longitude]),Number(e[t.latitude])]}}})}:[]}},created:function(){s.$emit("ws-action","on")},mounted:function(){at.a.accessToken=this.$route.query["mapbox_token"],this.map=new at.a.Map({container:"map-area",center:this.center,zoom:this.zoom,style:"mapbox://styles/mapbox/dark-v9"}),this.map.on("load",function(){this.map.addSource("logs",{type:"geojson",data:null}),this.map.addLayer({id:"logs-heat",type:"heatmap",source:"logs",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},"waterway-label"),this.map.addLayer({id:"logs-point",type:"circle",source:"logs",minzoom:7,paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,["interpolate",["linear"],["get","mag"],1,1,6,4],16,["interpolate",["linear"],["get","mag"],1,5,6,50]],"circle-color":["interpolate",["linear"],["get","mag"],1,"rgba(33,102,172,0)",2,"rgb(103,169,207)",3,"rgb(209,229,240)",4,"rgb(253,219,199)",5,"rgb(239,138,98)",6,"rgb(178,24,43)"],"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1]}},"waterway-label")}.bind(this))}},ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map"},[a("v-container",{staticClass:"header",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",[t._v("Select the Longitude and Latitude fields from your stream :")])]),t._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:t.columns,dense:"",label:t.longitudeTitle,autocomplete:"",disabled:t.isDisabled},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:t.columns,dense:"",label:t.latitudeTitle,autocomplete:"",disabled:t.isDisabled},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"map-area",attrs:{id:"map-area"}})],1)},st=[];function it(t){a("+PJj")}var rt=!1,ct=it,lt="data-v-7cf3160c",ut=null,dt=Object(l["a"])(nt,ot,st,rt,ct,lt,ut),mt=dt.exports,ft={data:function(){return{keys:[]}},computed:{isDisabled:function(){return 0===this.columns.length},keyTitle:function(){return this.$store.getters.columns.length>0?"Key":"Key (loading ...)"},columns:function(){return this.$store.getters.columns.map(function(t){return{text:t,value:t}})},logs:function(){return this.$store.getters.logs}},created:function(){s.$emit("ws-action","on")},methods:{newCard:function(){this.keys.push({value:null})}}},pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"cards",attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.keys,function(e,n){return a("v-flex",{key:n,attrs:{xs3:""}},[a("v-card",{attrs:{tile:""}},[a("v-card-text",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.keys[n].value?t.logs[t.logs.length-1][t.keys[n].value]:"Please select a key."))])]),t._v(" "),a("v-card-actions",[a("v-select",{attrs:{items:t.columns,dense:"",label:t.keyTitle,autocomplete:"",disabled:t.isDisabled},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"key.value"}})],1)],1)],1)}),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-card",{staticClass:"newCard",attrs:{tile:""}},[a("v-card-text",{attrs:{"primary-title":"",ripple:""}},[a("h3",{staticClass:"headline mb-0",attrs:{title:"Create a new card"},on:{click:t.newCard}},[t._v("+")])])],1)],1)],2)],1)},gt=[];function ht(t){a("BMiZ")}var vt=!1,bt=ht,wt="data-v-ab15800e",yt=null,_t=Object(l["a"])(ft,pt,gt,vt,bt,wt,yt),xt=_t.exports,$t=(a("xxro"),a("uGK+"),a("Q3dO"),{data:function(){return{hasData:!1}},mounted:function(){var t=this;s.$on("ws-data",function(e){t.hasData=!0,t.$el.querySelector(".viewer").update([e])})},created:function(){s.$emit("ws-action","on")}}),kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pivot"},[t.hasData?t._e():a("p",{staticClass:"waiting"},[t._v("Waiting for new data...")]),t._v(" "),a("perspective-viewer",{staticClass:"viewer",attrs:{index:"id",view:"scatter"}})],1)},Ct=[];function St(t){a("podZ")}var zt=!1,Nt=St,Ot="data-v-83de9a5a",jt=null,Lt=Object(l["a"])($t,kt,Ct,zt,Nt,Ot,jt),Tt=Lt.exports,Et={},Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"notFound",attrs:{column:""}},[a("h2",[t._v("404 : Not Found!")]),t._v(" "),a("p",[t._v(" But enjoy this funny gif:")]),t._v(" "),a("v-container",{staticClass:"header",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","offset-xs3":""}},[a("iframe",{attrs:{src:"https://giphy.com/embed/NoGhgVB9ybIJ2",width:"480",height:"480",frameBorder:"0",allowFullScreen:""}})])],1)],1)],1)},Dt=[];function qt(t){a("vKRS")}var Ft=!1,Kt=qt,Pt="data-v-6fb564cf",Gt=null,Ht=Object(l["a"])(Et,Bt,Dt,Ft,Kt,Pt,Gt),Mt=Ht.exports;n["a"].use(B["a"]);var Zt=new B["a"]({mode:"history",routes:[{path:"/table",name:"Table",component:tt},{path:"/map",name:"Map",component:mt},{path:"/pivot",name:"Pivot",component:Tt},{path:"/cards",name:"Cards",component:xt},{path:"/list",name:"List",component:A},{path:"*",component:Mt}]}),At=a("3EgV"),Jt=a.n(At);a("7zck");n["a"].use(Jt.a),n["a"].config.productionTip=!1,new n["a"]({router:Zt,store:$,render:function(t){return t(E)}}).$mount("#app")},Tc2v:function(t,e){},kDZB:function(t,e){},podZ:function(t,e){},vKRS:function(t,e){}},[0]);
//# sourceMappingURL=app.914107af.js.map